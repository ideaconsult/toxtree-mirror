<project name="verhaar" default="verhaar" basedir=".">


        <!-- compile options -->
        <property name="build.sysclasspath" value="ignore" />
        <property name="build.compiler" value="modern" />
        <property name="debug" value="on" />
        <property name="deprecation" value="on" />
        <property name="optimization" value="on" />
        
    <!-- directories -->
    <property name="build" value="bin" />
    <property name="sourcedist"	value="sourcedist" />
    <property name="dist" value="dist" />
    <property name="doc" value="doc" />	
    <property name="src" value="src" />	
    <property name="lib" value="../../jars" />
    <property name="toxTreelib" value="../../dist" />	
    <property name="src.tests" value="${src}/ambit/test" />
    <property name="reports.tests" value="reports" />
    <property name="appjars.dir" value="${dist}/appjars" />
    <property name="keystore" value="../ambit/ambitKeyStore" />	
	
	<property name="backup" value="../archive" />

    <!-- CLASSPATH -->
    <path id="project.class.path">
	    <pathelement location="${java.ext.dirs}/rt.jar" />
	    <fileset dir="${lib}">
	        <!-- CDK jars -->	    	
			<include name="cdk-core.jar" />	
            <include name="cdk-data.jar" />		
			<include name="cdk-io.jar" />
			<include name="cdk-libio-cml.jar" />	    	
			<include name="cdk-standard.jar" />
			<include name="cdk-experimental.jar" />	
			<include name="cdk-render.jar" />
			<include name="cdk-extra.jar" />
			<include name="cdk-interfaces.jar" />
			<include name="cdk-libio.jar" />
			<include name="cdk-qsar.jar" />	    	
			<include name="cdk-qsar-cml.jar" />	    
	    	<!-- MySQL is not (yet) necessary
		    <include name="mysql-connector-java-3.1.7-gamma-bin.jar" />	
		     -->	    		    	
		    <include name="printf.jar" />
		    <include name="vecmath1.2-1.14.jar"	/>
		    <include name="cmlAll_1.4.jar" />
		    <include name="base_1.4.jar" />	
		    <include name="pmrdom_1.4.jar" />
		    <include name="pmrlib.jar" />	 
	    	<!-- Java Matrix library -->	    	
			<include name="Jama-1.0.1.jar" />
		    <include name="jcommon-0.9.6.jar" />
	    	<!-- Logging -->
		    <include name="log4j.jar" />	    	
	    	<!-- JCHEMPAINT -->
		    <include name="cdk-applications.jar" />	    	
		    <include name="cdk-swing.jar" />	    	
		    <include name="cdk-jchempaint.jar" />	    	
	    	<include name="gnuaxp.jar" />	    		    	
	    	<!-- JPEG stuff -->
		    <include name="jai-core.jar" />	    	
		    <include name="jai-codec.jar" />	    		    	    	
	    </fileset>
		    <fileset dir="${toxTreelib}">
		        <!-- toxTree jars -->	    	
				<include name="toxConfig.jar" />			    	
				<include name="toxCore.jar" />	
	            <include name="toxFuncGroups.jar" />		
				<include name="toxReactions.jar" />
				<include name="toxRules.jar" />	    	
				<include name="toxCramer.jar" />	   		    	
		    </fileset>    	
    </path>
	<!-- backupTar target -->
	<target name="backup" description="Backs up all source into a tar file.">
		<mkdir dir="${backup}" />
		<tstamp/>
		<property name="backupFile" value ="${ant.project.name}_${DSTAMP}${TSTAMP}.tar.gz" />
		
		<tar tarfile="${backup}/${backupFile}" 
			basedir="${src}" compression="gzip" />

		<echo message="Backup file ${backupFile} has been created." />		
	</target>

	
	<target id="init" name="init" depends="setupBuildDir"/>
    <target id="setupBuildDir" name="setupBuildDir">
            <tstamp />
            <mkdir dir="${build}" />
            <mkdir dir="${dist}" />
    </target>
	
    <!-- clean -->	
    <target id="clean" name="clean" description="Removes autogenerated files.">
            <delete>
                <fileset dir="." includes="**/*~" />
                <fileset dir="." includes="*.rda" />
                <fileset dir="${src}" includes="*.classes" />
                <fileset dir="${src}" includes="*.javafiles">
                    <exclude name="jmol*.javafiles" />
                </fileset>
   
            </delete>
            <delete dir="${build}" />
            
            <delete>
            
                <fileset dir="${dist}" includes="*.jar" />
                
   
            </delete>
    </target>

    <!-- generates classfiles and javafiles -->
    <target name="runDoclet" id="runDoclet" >
        <javadoc private="true"  maxmemory="128m">
            <classpath>
                <fileset dir="${lib}">
                    <include name="*.jar" />
                </fileset>
                <mkdir dir="${toxTreelib}" />
                <fileset dir="${toxTreelib}">
                        <include name="*.jar" />
                </fileset>
            </classpath>

            <doclet name="ListFilesDoclet" path="${doc}/src"/>

            <packageset dir="${src}">
                <include name="verhaar/**"/>
            </packageset>

        </javadoc>
        <move todir="${src}" failonerror="true">
            <fileset dir=".">
              <include name="*.javafiles"/>
              <include name="*.classes"/>
            </fileset>
        </move>
    </target>
	
    <target id="compile" name="runDoclet, compile"	
	description="Compiles verhaar"
	depends="init, compile-verhaar">
    </target>
    <target id="compile-verhaar" name="compile-verhaar" depends="init">
	    <echo message="Compiling verhaar rule classes." />	

	    <javac srcdir="${src}" destdir="${build}" optimize="${optimization}"
		   debug="${debug}" deprecation="${deprecation}">
			<includesfile name="${src}/rules.javafiles" />	    	
			<includesfile name="${src}/verhaar.javafiles" />	    		    	
			<includesfile name="${src}/query.javafiles" />	    		    	
			<includesfile name="${src}/categories.javafiles" />	    		    	
		<classpath refid="project.class.path" />
	    </javac>
    </target>
	<!--
    <target id="apps" name="apps" depends= "toxTreeDB, toxTree, toxRules, toxCore, toxdb, toxUI, toxCramer, verhaar"
    description="Builds	the application	jar files for the toxTree application.">
   <echo message="Compiling	toxTree applications." />	
    </target>	
	
	-->
    <!-- a jar to only contain  verhaar scheme  -->

	<target	id="verhaar" name="verhaar" depends="compile-verhaar">
		<jar jarfile="${dist}/verhaarScheme.jar"
			manifest="${src}/verhaar/MANIFEST.verhaar"
			compress="true">
		    <fileset dir="${build}">
				<includesfile name="${src}/verhaar.classes" />	    		    	
				<includesfile name="${src}/query.classes" />	    		    	
				<includesfile name="${src}/rules.classes" />	    	
				<includesfile name="${src}/categories.classes" />	    		    	
		   </fileset>
		</jar>
	</target>	

	
	
</project>
